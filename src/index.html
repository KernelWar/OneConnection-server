<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Mouse server</title>

    <!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />

    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap-grid.min.css">

</head>

<body>
    <div id="content-qr">
        <br>
        <h6>Con tu dispositivo escanea el QR</h6>
        <canvas id="qr_ip" width="500"></canvas>
    </div>
    <div class="container">
        <div id="device-info" class="row">
            <div class="col-12">
                <div class="card text-center">
                    <div class="card-header">
                        Dispositivo
                    </div>
                    <div class="card-body">
                        <h5 id="txt-system" class="card-title">---</h5>
                        <p id="txt-device" class="card-text">---</p>
                        <img src="img/aplicacion.svg" width="30" alt="">
                        <br><br>
                        <span class="badge badge-primary">Conexión establecida</span>
                        <div id="connect-success">
                            <div class="spinner-grow spinner-grow-sm text-success" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <div class="spinner-grow spinner-grow-sm text-success" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <div class="spinner-grow spinner-grow-sm text-success" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="wait-device" class="row">
            <div class="col-12">
                <div class="card text-center">
                    <div class="card-header">
                        Estado
                    </div>
                    <div class="card-body">
                        <span class="badge badge-primary">Esperando conexión</span>
                        <div>
                            <div class="spinner-grow spinner-grow-sm text-primary" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <div class="spinner-grow spinner-grow-sm text-primary" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <div class="spinner-grow spinner-grow-sm text-primary" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        window.jQuery = window.$ = require('jquery')
        const store = new(require('electron-store'))
        $("#wait-device").hide()
        $("#device-info").hide()
        const checkDevice = setInterval(() => {
            if (store.get('system') && store.get('device')) {
                $("#txt-system").text(store.get('system'))
                $("#txt-device").text(store.get('device'))
                $("#wait-device").hide()
                $("#device-info").show()
            } else {
                $("#device-info").hide()
                $("#wait-device").show()
            }
        }, 1000)
    </script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.js"></script>
    <script src="js/qr-generator.js"></script>


</body>


</html>